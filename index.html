<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    
    <title>ä¸€ä»½ç‰¹åˆ«çš„ç¤¼ç‰©</title>
    
    <link rel="apple-touch-icon" href="doctor.png">
    
    <style>
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background-color: #fce4ec; /* æ¸©é¦¨çš„ç²‰è‰²èƒŒæ™¯ */
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden; /* é˜²æ­¢é¡µé¢æ»šåŠ¨ */
            cursor: pointer;
        }

        .gift-container {
            text-align: center;
            position: relative; /* å…³é”®ï¼šä½œä¸ºæ‰€æœ‰ç‰¹æ•ˆçš„å®šä½é”šç‚¹ */
            display: inline-block;
        }

        #doctor-icon {
            /* 1. å°ºå¯¸ï¼š90%çš„å±å¹•çŸ­è¾¹ */
            width: 90vmin;
            height: 90vmin;
            
            object-fit: cover; 
            /* 2. ç§»é™¤æ‰€æœ‰è¾¹æ¡† */
            /* border: 4px solid #fff; (å·²ç§»é™¤) */
            
            position: relative;
            /* 3. å±‚çº§ï¼šå›¾ç‰‡åœ¨ä¸­é—´ (10) */
            z-index: 10;
            
            /* ç¡®ä¿åŠ¨ç”»å¹³æ»‘ */
            transition: transform 0.1s ease-out;
        }
        
        /* 4. å›¾ç‰‡ç‚¹å‡»åŠ¨æ•ˆ */
        #doctor-icon.clicked {
            transform: scale(0.95); /* ç‚¹å‡»æ—¶ç¼©å° */
        }

        /* --- ç‰¹æ•ˆæ ·å¼ --- */
        .flying-message, .sparkle {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            opacity: 0; 
            pointer-events: none; /* è®©ç‚¹å‡»å¯ä»¥ç©¿é€å®ƒä»¬ */
        }

        /* 5. æ–‡å­—é£å‡ºæ•ˆæœ */
        .flying-message {
            font-size: 1.5rem;
            font-weight: bold;
            white-space: nowrap; 
            /* 6. å±‚çº§ï¼šæ–‡å­—åœ¨æœ€å‰é¢ (20) */
            z-index: 20; 
            animation: flyFromCenter 1.5s forwards ease-out;
        }

        @keyframes flyFromCenter {
            0% {
                opacity: 1;
                transform: translate(calc(-50% + var(--x-end, 0px)), -50%) scale(1);
            }
            100% {
                opacity: 0;
                transform: translate(calc(-50% + var(--x-end, 0px)), -150px) scale(1.2); 
            }
        }

        /* 7. æˆ‘ä»¬çš„ "CanvasçƒŸèŠ±" (ç”¨CSSç²’å­å®ç°) */
        .sparkle {
            background-color: #ffd700; 
            border-radius: 50%;
            width: 8px;
            height: 8px;
            /* 8. å±‚çº§ï¼šçƒŸèŠ±åœ¨å›¾ç‰‡å‰é¢ (15) */
            z-index: 15; 
            animation: sparkleExplode 1s forwards ease-out;
        }

        @keyframes sparkleExplode {
            0% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1); 
            }
            100% {
                opacity: 0;
                transform: translate(var(--x), var(--y)) scale(0.5); 
            }
        }
    </style>
</head>
<body>

    <div class="gift-container">
        <img src="doctor.png" id="doctor-icon" alt="å¯çˆ±çš„åŒ»ç”Ÿ">
    </div>

    <script>
        const messages = [
            "ç”Ÿæ—¥å¿«ä¹ï¼ğŸ‚",
            "åŒ»ç”Ÿå§å§å¥½é…·ï¼",
            "å¤©å¤©å¼€å¿ƒï¼",
            "ä½ æ˜¯æœ€æ£’çš„ï¼",
            "å·¥ä½œè¾›è‹¦å•¦ï¼",
            "ä»Šå¤©ä½ æœ€å¤§ï¼",
            "Happy Birthday!",
            "æ°¸è¿œ18å²ï¼",
            "æ„¿æœ›å…¨éƒ½å®ç°ï¼",
            "è¶…çº§å¥³ç¥ï¼"
        ];

        const colors = [
            '#FF69B4', '#FFD700', '#ADFF2F', '#87CEEB', '#BA55D3', '#FF4500', '#32CD32', '#6A5ACD', '#FF6347'
        ];

        const giftContainer = document.querySelector('.gift-container');
        const doctorIcon = document.getElementById('doctor-icon');

        /* 9. ç§»é™¤å†·å´é€»è¾‘ */
        // let isAnimating = false; (å·²ç§»é™¤)
        // const animationDuration = 1500; (å·²ç§»é™¤)

        /* 10. å…¨å±ç‚¹å‡»äº‹ä»¶ */
        document.body.addEventListener('click', function(event) {
            
            // if (isAnimating) { return; } (å·²ç§»é™¤)
            // isAnimating = true; (å·²ç§»é™¤)

            // 11. è§¦å‘å›¾ç‰‡ç‚¹å‡»åŠ¨æ•ˆ
            doctorIcon.classList.add('clicked');
            
            // 12. çŸ­æš‚å»¶è¿Ÿåç§»é™¤ç‚¹å‡»æ•ˆæœï¼Œå®ç° "å¼¹ä¸€ä¸‹" çš„æ„Ÿè§‰
            setTimeout(() => {
                doctorIcon.classList.remove('clicked');
            }, 100); // 100æ¯«ç§’åå›¾ç‰‡æ¢å¤åŸçŠ¶
            
            // --- ç‰¹æ•ˆé€»è¾‘ ---

            // A. ç”Ÿæˆéšæœºç¥ç¦æ–‡å­—
            const randomIndex = Math.floor(Math.random() * messages.length);
            const randomMessage = messages[randomIndex];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];

            const messageElement = document.createElement('div');
            messageElement.textContent = randomMessage;
            messageElement.classList.add('flying-message');
            messageElement.style.color = randomColor;

            const randomXEnd = (Math.random() - 0.5) * 100;
            messageElement.style.setProperty('--x-end', `${randomXEnd}px`);

            giftContainer.appendChild(messageElement);

            messageElement.addEventListener('animationend', () => {
                messageElement.remove();
            });

            // B. ç”ŸæˆçƒŸèŠ±ç²’å­
            for (let i = 0; i < 20; i++) { 
                const sparkle = document.createElement('div');
                sparkle.classList.add('sparkle');
                
                const speed = 120 + Math.random() * 40; // æ‰©æ•£åŠå¾„å¢åŠ éšæœºæ€§
                const angle = Math.random() * 2 * Math.PI;
                const dx = speed * Math.cos(angle);
                const dy = speed * Math.sin(angle);

                sparkle.style.setProperty('--x', `${dx}px`);
                sparkle.style.setProperty('--y', `${dy}px`);
                sparkle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

                giftContainer.appendChild(sparkle);

                sparkle.addEventListener('animationend', () => {
                    sparkle.remove();
                });
            }
            
            // 13. ç§»é™¤åŠ¨ç”»å†·å´çš„ setTimeout
            // (setTimeout(() => { ... }, animationDuration); å·²ç§»é™¤)
        });
    </script>

</body>
</html>

